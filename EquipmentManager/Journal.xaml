<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:EquipmentManagerVM;assembly=EquipmentManagerVM">

    <DataTemplate x:Key="filterStringHeaderTemplate">
        <Grid ShowGridLines="False">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Grid.Row="0"
                           Grid.ColumnSpan="2"
                           Margin="0 0 0 3"
                           HorizontalAlignment="Center"
                           Text="{Binding Title}">
            </TextBlock>

            <CheckBox Grid.Column="0" Grid.Row="1"
                      Margin="3 0 3 0"
                      VerticalAlignment="Center"
                      IsChecked="{Binding Enabled}"  />
            <TextBox Grid.Column="1" Grid.Row="1" 
                     Margin="0 0 0 0"
                     VerticalAlignment="Center"
                     MinWidth="50"
                     Text="{Binding Criteria, UpdateSourceTrigger=PropertyChanged}"/>
        </Grid>
    </DataTemplate>

    <ControlTemplate x:Key="Journal">

        <ListView ItemsSource="{Binding FilteredJournalEntries}">
            <ListView.View>
                <GridView>
                    <GridView.Columns>

                        <GridViewColumn DisplayMemberBinding="{Binding DateTime, ConverterCulture=ru}"
                                        HeaderTemplate="{StaticResource filterStringHeaderTemplate}">
                            <GridViewColumnHeader HorizontalContentAlignment="Stretch"
                                                      Content="{Binding FilterData2}"/>
                        </GridViewColumn>

                        <GridViewColumn DisplayMemberBinding="{Binding IsIncoming}"
                                        HeaderTemplate="{StaticResource filterStringHeaderTemplate}">
                            <GridViewColumnHeader HorizontalContentAlignment="Stretch">
                                Входящее
                            </GridViewColumnHeader>
                        </GridViewColumn>

                        <GridViewColumn DisplayMemberBinding="{Binding Position.Name}" 
                                        HeaderTemplate="{StaticResource filterStringHeaderTemplate}">
                            <GridViewColumnHeader HorizontalContentAlignment="Stretch" 
                                                  Content="{Binding FilterCriteriaPosition}"/>

                        </GridViewColumn>

                        <GridViewColumn DisplayMemberBinding="{Binding PositionStatusBitInfo.Title}" 
                                        HeaderTemplate="{StaticResource filterStringHeaderTemplate}">
                            <GridViewColumnHeader HorizontalContentAlignment="Stretch">
                                Статус
                            </GridViewColumnHeader>
                        </GridViewColumn>

                        <GridViewColumn DisplayMemberBinding="{Binding JournalEntryCategory.Title}"
                                        HeaderTemplate="{StaticResource filterStringHeaderTemplate}">
                            <GridViewColumnHeader HorizontalContentAlignment="Stretch">
                                Категория
                            </GridViewColumnHeader>
                        </GridViewColumn>

                        <GridViewColumn DisplayMemberBinding="{Binding Description}"
                                        HeaderTemplate="{StaticResource filterStringHeaderTemplate}">
                            <GridViewColumnHeader HorizontalContentAlignment="Stretch"
                                                  Content="{Binding FilterCriteriaDescription}"/>

                        </GridViewColumn>

                    </GridView.Columns>
                </GridView>
            </ListView.View>
        </ListView>

    </ControlTemplate>

</ResourceDictionary>